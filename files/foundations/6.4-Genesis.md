### 6.4 Genesis

#### 1ã€Genesisç®€ä»‹

<img width="553" height="338" alt="image" src="https://github.com/user-attachments/assets/d9f0338a-b88c-480e-ba4c-c0bb647216cd" />

Genesis åŸºäºä¸€ä¸ªé‡æ–°è®¾è®¡å¹¶ä»é›¶å¼€å§‹æ„å»ºçš„é€šç”¨ç‰©ç†å¼•æ“ï¼Œæ•´åˆäº†å¤šç§ç‰©ç†æ±‚è§£å™¨åŠå…¶è€¦åˆï¼Œå½¢æˆä¸€ä¸ªç»Ÿä¸€çš„æ¡†æ¶ã€‚è¿™ä¸ªæ ¸å¿ƒç‰©ç†å¼•æ“è¿›ä¸€æ­¥é€šè¿‡ä¸€ä¸ªç”Ÿæˆæ€§ä»£ç†æ¡†æ¶å¾—åˆ°å¢å¼ºï¼Œåè€…æ—¨åœ¨å®ç°å®Œå…¨è‡ªåŠ¨åŒ–çš„æ•°æ®ç”Ÿæˆï¼Œé€‚ç”¨äºæœºå™¨äººå­¦åŠå…¶ä»–é¢†åŸŸã€‚ç›®å‰ï¼Œæˆ‘ä»¬æ­£åœ¨å¼€æºåº•å±‚ç‰©ç†å¼•æ“å’Œä»¿çœŸå¹³å°ï¼Œç”Ÿæˆæ€§æ¡†æ¶å°†åœ¨ä¸ä¹…çš„å°†æ¥å‘å¸ƒã€‚å®ƒæ˜¯ä¸€ä¸ªä¸ºé€šç”¨æœºå™¨äºº/å…·èº«æ™ºèƒ½/ç‰©ç†æ™ºèƒ½åº”ç”¨è®¾è®¡çš„ç‰©ç†å¹³å°ã€‚å®ƒåŒæ—¶å…·å¤‡ä»¥ä¸‹å¤šä¸ªåŠŸèƒ½ï¼š
- ä¸€ä¸ªä»é›¶å¼€å§‹é‡æ–°æ„å»ºçš„é€šç”¨ç‰©ç†å¼•æ“ï¼Œèƒ½å¤Ÿæ¨¡æ‹Ÿå¤šç§ææ–™å’Œç‰©ç†ç°è±¡ã€‚
- ä¸€ä¸ªè½»é‡çº§ã€è¶…å¿«é€Ÿã€PythonåŒ–ã€ç”¨æˆ·å‹å¥½çš„æœºå™¨äººä»¿çœŸå¹³å°ã€‚
- ä¸€ä¸ªå¼ºå¤§ä¸”å¿«é€Ÿçš„çœŸå®æ„Ÿæ¸²æŸ“ç³»ç»Ÿã€‚
- ä¸€ä¸ªç”Ÿæˆæ•°æ®å¼•æ“ï¼Œèƒ½å¤Ÿå°†ç”¨æˆ·è¾“å…¥çš„è‡ªç„¶è¯­è¨€æè¿°è½¬åŒ–ä¸ºå„ç§æ•°æ®å½¢å¼ã€‚

Genesis çš„å»ºè®¾å’Œå‘å±•å°†æŒç»­ä»¥ä»¥ä¸‹é•¿æœŸç›®æ ‡ä¸ºé©±åŠ¨åŠ›ï¼š
- é™ä½ä½¿ç”¨ç‰©ç†ä»¿çœŸå¹³å°çš„é—¨æ§›ï¼Œè®©æœºå™¨äººç ”ç©¶å¯¹æ¯ä¸ªäººéƒ½å˜å¾—æ›´å®¹æ˜“è®¿é—®ã€‚ï¼ˆå‚è§æˆ‘ä»¬çš„æ‰¿è¯ºï¼‰
- å°†ä¸€ç³»åˆ—æœ€å…ˆè¿›çš„ç‰©ç†æ±‚è§£å™¨ç»Ÿä¸€åˆ°ä¸€ä¸ªæ¡†æ¶ä¸­ï¼Œå…è®¸åœ¨è™šæ‹Ÿä¸–ç•Œä¸­ä»¥æœ€é«˜çš„ç‰©ç†ã€è§†è§‰å’Œæ„Ÿå®˜ä¿çœŸåº¦é‡æ–°åˆ›å»ºæ•´ä¸ªç‰©ç†ä¸–ç•Œï¼Œé‡‡ç”¨æœ€å…ˆè¿›çš„ä»¿çœŸæŠ€æœ¯ã€‚
- æœ€å°åŒ–äººç±»åœ¨æ”¶é›†å’Œç”Ÿæˆæœºå™¨äººåŠå…¶ä»–é¢†åŸŸæ•°æ®æ—¶çš„å·¥ä½œé‡ï¼Œè®©æ•°æ®é£è½®è‡ªåŠ¨è¿è½¬ã€‚

**ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªæ–°çš„ç‰©ç†ä»¿çœŸå™¨?**

ä¸ä»¥å¾€çš„ä»¿çœŸå¹³å°ç›¸æ¯”ï¼ŒGenesis åœ¨å¤šä¸ªæ–¹é¢å…·æœ‰æ˜¾è‘—çš„ä¼˜åŠ¿ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®ç‰¹ç‚¹ï¼š
- ğŸ PythonåŒ–ä¸”å®Œå…¨é€æ˜ï¼šGenesis å®Œå…¨ç”¨ Python å¼€å‘å¹¶å¼€æºï¼Œä½¿å¾—ä»£ç ç†è§£å’Œè´¡çŒ®å˜å¾—æ›´åŠ å®¹æ˜“ã€‚
- ğŸ‘¶ å®‰è£…ç®€ä¾¿ï¼ŒAPI è®¾è®¡æå…¶ç®€æ´æ˜“ç”¨ï¼šç”¨æˆ·èƒ½å¤Ÿè½»æ¾å®‰è£…å¹¶ä¸Šæ‰‹ï¼ŒAPI è®¾è®¡ç®€æ´ç›´è§‚ï¼Œé€‚åˆå„ç§ä½¿ç”¨è€…ã€‚
- ğŸš€ é«˜åº¦å¹¶è¡ŒåŒ–çš„ä»¿çœŸï¼Œé€Ÿåº¦æ— ä¸ä¼¦æ¯”ï¼šGenesis æ˜¯å…¨çƒæœ€å¿«çš„ç‰©ç†å¼•æ“ï¼Œå…¶ä»¿çœŸé€Ÿåº¦æ¯”ç°æœ‰çš„ GPU åŠ é€Ÿæœºå™¨äººä»¿çœŸå™¨ï¼ˆå¦‚ Isaac Gym/Sim/Labã€Mujoco MJX ç­‰ï¼‰å¿« 10 åˆ° 80 å€ï¼ˆæ˜¯çš„ï¼Œè¿™æœ‰ç‚¹åƒç§‘å¹»å°è¯´ï¼‰ï¼Œè€Œä¸”åœ¨ä»¿çœŸç²¾åº¦å’Œä¿çœŸåº¦ä¸Šæ¯«ä¸å¦¥åã€‚
- ğŸ’¥ ç»Ÿä¸€æ¡†æ¶ï¼Œæ”¯æŒå¤šç§æœ€å…ˆè¿›çš„ç‰©ç†æ±‚è§£å™¨ï¼šGenesis æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿæ¨¡æ‹Ÿå„ç§ææ–™å’Œç‰©ç†ç°è±¡ï¼Œè¦†ç›–å¹¿æ³›çš„åº”ç”¨åœºæ™¯ã€‚
- ğŸ“¸ çœŸå®æ„Ÿå…‰çº¿è¿½è¸ªæ¸²æŸ“ï¼Œä¼˜åŒ–æ€§èƒ½ï¼šé€šè¿‡ä¼˜åŒ–çš„å…‰çº¿è¿½è¸ªæŠ€æœ¯ï¼ŒGenesis æä¾›é«˜è´¨é‡çš„ç…§ç‰‡çº§æ¸²æŸ“æ•ˆæœï¼ŒåŒæ—¶ä¿æŒé«˜æ€§èƒ½ã€‚
- ğŸ“ å¯å¾®åˆ†æ€§ï¼šGenesis è¢«è®¾è®¡ä¸ºå®Œå…¨å…¼å®¹å¯å¾®åˆ†ä»¿çœŸã€‚ç›®å‰ï¼Œæˆ‘ä»¬çš„ MPM æ±‚è§£å™¨å’Œå·¥å…·æ±‚è§£å™¨å·²ç»æ”¯æŒå¯å¾®åˆ†ï¼Œæœªæ¥å°†ä¸ºæ›´å¤šæ±‚è§£å™¨ï¼ˆåŒ…æ‹¬åˆšä½“ä»¿çœŸï¼‰æ·»åŠ å¯å¾®åˆ†æ€§æ”¯æŒã€‚
- â˜ğŸ» ç‰©ç†ç²¾ç¡®ä¸”å¯å¾®åˆ†çš„è§¦è§‰ä¼ æ„Ÿå™¨ï¼šGenesis æä¾›ç‰©ç†ç²¾ç¡®çš„è§¦è§‰ä¼ æ„Ÿå™¨ï¼Œèƒ½å¤Ÿæ¨¡æ‹ŸçœŸå®ä¸–ç•Œçš„ç‰©ç†äº¤äº’ï¼Œå¹¶æ”¯æŒè¿›ä¸€æ­¥çš„ä¼˜åŒ–ã€‚
- ğŸŒŒ åŸç”Ÿæ”¯æŒç”Ÿæˆæ€§ä»¿çœŸï¼šGenesis å…è®¸é€šè¿‡è‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆå„ç§å½¢å¼çš„æ•°æ®ï¼ŒåŒ…æ‹¬äº’åŠ¨åœºæ™¯ã€ä»»åŠ¡å»ºè®®ã€å¥–åŠ±ã€èµ„äº§ã€è§’è‰²åŠ¨ä½œã€ç­–ç•¥ã€è½¨è¿¹ã€ç›¸æœºè¿åŠ¨ã€ï¼ˆç‰©ç†ç²¾ç¡®çš„ï¼‰è§†é¢‘ç­‰ã€‚

**Genesisçš„æ„¿æ™¯ä¸ä½¿å‘½**

ä»¿çœŸåœ¨æœºå™¨äººç ”ç©¶ä¸­å‘æŒ¥äº†è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œä¸ºè®­ç»ƒæœºå™¨äººç­–ç•¥å’Œç”Ÿæˆæ•°æ®æä¾›äº†åšå®çš„åŸºç¡€ï¼Œå€ŸåŠ©ä¸æ–­å¢å¼ºçš„è®¡ç®—èƒ½åŠ›ã€‚ç„¶è€Œï¼Œæœºå™¨äººç ”ç©¶äººå‘˜é•¿æœŸä»¥æ¥å—é™äºç°æœ‰ä»¿çœŸå¹³å°çš„å¯ç”¨æ€§é—®é¢˜å’Œç¼ºä¹é€æ˜åº¦ã€‚ç°æœ‰çš„GPUåŠ é€Ÿä»¿çœŸå™¨é€šå¸¸å› ä¸ºæ¶‰åŠå¤æ‚çš„æ•°æ®é©±åŠ¨æ¦‚å¿µã€å¤æ‚çš„APIå’Œè½¯ä»¶å †æ ˆï¼Œå…·æœ‰é™¡å³­çš„å­¦ä¹ æ›²çº¿â€”â€”è¿™ä½¿å¾—æŒæ¡è¿™äº›ä»¿çœŸå™¨å¯¹äºç ”ç©¶äººå‘˜ï¼Œå°¤å…¶æ˜¯æ–°å…¥é—¨çš„ç ”ç©¶äººå‘˜è€Œè¨€ï¼Œæˆä¸ºä¸€é¡¹è‰°å·¨çš„ä»»åŠ¡ã€‚æ­¤å¤–ï¼Œéƒ¨åˆ†ä»¿çœŸå™¨æ˜¯å°é—­æºä»£ç çš„ï¼Œé™åˆ¶äº†é€æ˜åº¦ï¼Œç ”ç©¶äººå‘˜æ— æ³•åŸºäºå®é™…è§‚å¯Ÿå’Œåé¦ˆç†è§£ã€æ§åˆ¶æˆ–é€æ­¥æ”¹è¿›åº•å±‚çš„ç‰©ç†æ±‚è§£å™¨ã€‚
Genesis é¡¹ç›®åº”è¿è€Œç”Ÿï¼Œæ—¨åœ¨åº”å¯¹è¿™äº›æŒ‘æˆ˜ã€‚æˆ‘ä»¬çš„æ„¿æ™¯æ˜¯æ‰“é€ ä¸€ä¸ªå®Œå…¨é€æ˜ã€ç”¨æˆ·å‹å¥½çš„ç”Ÿæ€ç³»ç»Ÿï¼Œè®©æ¥è‡ªç‰©ç†ä»¿çœŸå’Œæœºå™¨äººå­¦èƒŒæ™¯çš„è´¡çŒ®è€…ä»¬èƒ½å¤Ÿèšé›†åœ¨ä¸€èµ·ï¼Œå…±åŒåˆ›å»ºä¸€ä¸ªé«˜æ•ˆã€é€¼çœŸçš„è™šæ‹Ÿä¸–ç•Œï¼Œç”¨äºæœºå™¨äººç ”ç©¶åŠæ›´å¤šåº”ç”¨ã€‚æˆ‘ä»¬è¿˜æ„è¯†åˆ°ï¼Œè®¡ç®—æœºå›¾å½¢å­¦é¢†åŸŸæŒç»­å¼€å‘äº†å¤§é‡åˆ›æ–°çš„ç®—æ³•ï¼Œè¿™äº›ç®—æ³•èƒ½å¤Ÿåº”ç”¨äºä»¿çœŸå’Œæ¸²æŸ“é¢†åŸŸï¼›ç„¶è€Œï¼Œè¿„ä»Šä¸ºæ­¢ï¼Œè¿˜æ²¡æœ‰ä¸€ä¸ªåä½œæ€§å¼ºçš„é¡¹ç›®å°†è¿™äº›ç®—æ³•ç»“åˆèµ·æ¥ï¼Œåˆ›å»ºä¸€ä¸ªçœŸå®ä¸”è®¡ç®—é©±åŠ¨çš„è™šæ‹Ÿä¸–ç•Œï¼Œè®©å…·èº«æ™ºèƒ½å’Œç‰©ç†æ™ºèƒ½å¾—ä»¥è“¬å‹ƒå‘å±•ã€‚

#### 2ã€GenesisåŸºç¡€

##### 2.1 å®‰è£…

###### å®‰è£…æŒ‡å—
å…ˆå†³æ¡ä»¶
- Pythonï¼š3.9 æˆ–æ›´é«˜ç‰ˆæœ¬
- æ“ä½œç³»ç»Ÿï¼šLinuxï¼ˆæ¨èï¼‰/ MacOS / Windows
æ³¨æ„äº‹é¡¹
Genesis è®¾è®¡ä¸ºè·¨å¹³å°æ”¯æŒï¼ŒåŒ…æ‹¬ CPUã€CUDA GPU å’Œé CUDA GPU åç«¯è®¾å¤‡ã€‚ä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½ï¼Œæ¨èåœ¨é…æœ‰ CUDA å…¼å®¹ GPU çš„ Linux å¹³å°ä¸Šä½¿ç”¨ã€‚
ä¸åŒæ“ä½œç³»ç»Ÿçš„åŠŸèƒ½æ”¯æŒå¦‚ä¸‹ï¼š

| æ“ä½œç³»ç»Ÿ | GPU è®¾å¤‡ | GPU ä»¿çœŸ | CPU ä»¿çœŸ | äº¤äº’å¼æŸ¥çœ‹å™¨ | æ— å¤´æ¸²æŸ“ | 
|------|------------|----------------|----------|----------|  
| Linux | âœ… | âœ… | âœ… | âœ… |  
|  | AMD | âœ… | âœ… | âœ… | âœ… | 
|  | Intel | âœ… | âœ… | âœ… | âœ… | 
| Windows | âœ… | âœ… | âŒ | âŒ |  
|  | AMD | âœ… | âœ… | âŒ | âŒ | 
|  | Intel | âœ… | âœ… | âŒ | âŒ | 
| MacOS | Apple Silicon | âœ… | âœ… | âœ… | âœ… |

###### å®‰è£…æ­¥éª¤

**ï¼ˆ1ï¼‰é€šè¿‡ PyPI å®‰è£… Genesis**
```Shell
pip install genesis-world
```

**ï¼ˆ2ï¼‰å®‰è£… PyTorchï¼Œè¯·æ ¹æ®å®˜æ–¹è¯´æ˜è¿›è¡Œå®‰è£…**

**ï¼ˆ3ï¼‰ï¼ˆå¯é€‰ï¼‰è¿åŠ¨è§„åˆ’åŠŸèƒ½**

Genesis é›†æˆäº† OMPL çš„è¿åŠ¨è§„åˆ’åŠŸèƒ½ï¼Œå¹¶é€šè¿‡ç›´è§‚çš„ API åŒ…è£…ï¼Œä½¿è¿åŠ¨è§„åˆ’å˜å¾—è½»æ¾ã€‚è‹¥éœ€è¦å†…å»ºçš„è¿åŠ¨è§„åˆ’åŠŸèƒ½ï¼Œè¯·å…ˆä¸‹è½½é¢„ç¼–è¯‘çš„ OMPL wheelï¼Œç„¶åä½¿ç”¨ pip å®‰è£…

```Shell
pip install ompl
```

**ï¼ˆ4ï¼‰ï¼ˆå¯é€‰ï¼‰è¡¨é¢é‡å»º**

è‹¥éœ€è¦ç”¨äºå¯è§†åŒ–ç²’å­åŸºç¡€å®ä½“ï¼ˆæµä½“ã€å˜å½¢ç‰©ä½“ç­‰ï¼‰çš„ç²¾ç¾è§†è§‰æ•ˆæœï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨å†…éƒ¨çš„ç²’å­åŸºç¡€è¡¨ç¤ºé‡å»ºç½‘æ ¼è¡¨é¢ã€‚æˆ‘ä»¬æä¾›ä¸¤ç§é€‰æ‹©ï¼š

- splashsurfï¼šä¸€ç§æœ€å…ˆè¿›çš„è¡¨é¢é‡å»ºæ–¹æ³•ï¼Œæ•ˆæœè¾ƒå¥½ï¼š

```Shell
cargo install splashsurf
```

- ParticleMesherï¼šæˆ‘ä»¬è‡ªå·±çš„åŸºäº openVDB çš„è¡¨é¢é‡å»ºå·¥å…·ï¼ˆé€Ÿåº¦è¾ƒå¿«ï¼Œä½†æ•ˆæœä¸å¦‚ splashsurf å¹³æ»‘ï¼‰ï¼š

```Shell
echo "export LD_LIBRARY_PATH=
${PWD}/ext/ParticleMesher/ParticleMesherPy:$
LD_LIBRARY_PATH" >> ~/.bashrc
source ~/.bashrc
```

**ï¼ˆ5ï¼‰ï¼ˆå¯é€‰ï¼‰å…‰çº¿è¿½è¸ªæ¸²æŸ“å™¨**

å¦‚æœæ‚¨éœ€è¦ç…§ç‰‡çº§çœŸå®æ„Ÿè§†è§‰æ•ˆæœï¼ŒGenesis å†…ç½®äº†åŸºäºå…‰çº¿è¿½è¸ªï¼ˆè·¯å¾„è¿½è¸ªï¼‰çš„æ¸²æŸ“å™¨ï¼Œä½¿ç”¨äº†é«˜æ€§èƒ½çš„é¢†åŸŸç‰¹å®šè¯­è¨€ LuisaCompute å¼€å‘ã€‚
- è·å– LuisaRenderï¼š LuisaRender çš„å­æ¨¡å—ä½äº ext/LuisaRender ç›®å½•ï¼š

```Shell
git submodule update --init --recursive
```

- ä¾èµ–é¡¹ï¼š
å¦‚æœæ‚¨æœ‰ sudo æƒé™ï¼ˆæ¨èï¼‰ï¼š
â‘  å®‰è£… CUDAï¼ˆéœ€è¦ CUDA 12.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰ï¼š
â‘¡ Y
â‘¢ ä¸‹è½½ CUDA 11.7 å¹¶å®‰è£…ã€‚

```Shell
sudo apt install build-essential manpages-dev software-properties-common
sudo add-apt-repository ppa:ubuntu-toolchain-r/test
sudo apt update && sudo apt install gcc-11 g++-11
sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-11 110
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 110
g++ --version
gcc --version
```

```Shell
sudo apt install libvulkan-dev
sudo apt-get install zlib1g-dev
sudo apt-get install xorg-dev libglu1-mesa-dev
pip install "pybind11[global]"
sudo apt-get install libsnappy-dev
```

å¦‚æœæ‚¨æ²¡æœ‰ sudo æƒé™ï¼ˆä½¿ç”¨ Condaï¼‰ï¼š

```Shell
conda install -c conda-forge gcc=11.4 gxx=11.4 cmake=3.26.1 minizip zlib libuuid patchelf vulkan-tools vulkan-headers
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
pip install "pybind11[global]"
```
**ï¼ˆ6ï¼‰ç¼–è¯‘ï¼š ç¼–è¯‘ LuisaRender å’Œå…¶ Python ç»‘å®šã€‚**

- ä½¿ç”¨ç³»ç»Ÿä¾èµ–ï¼ˆæ­¥éª¤ 2.Aï¼‰ï¼š
```Shell
cd genesis/ext/LuisaRender
cmake -S . -B build -D CMAKE_BUILD_TYPE=Release -D PYTHON_VERSIONS=3.9 -D LUISA_COMPUTE_DOWNLOAD_NVCOMP=ON -D LUISA_COMPUTE_ENABLE_GUI=OFF 
cmake --build build -j $(nproc)
```
- ä½¿ç”¨ Conda ä¾èµ–ï¼ˆæ­¥éª¤ 2.Bï¼‰ï¼š
```Shell
export CONDA_INCLUDE_PATH=path/to/anaconda/include
cd ./ext/LuisaRender
cmake -S . -B build -D CMAKE_BUILD_TYPE=Release -D PYTHON_VERSIONS=3.9 -D LUISA_COMPUTE_DOWNLOAD_NVCOMP=ON -D LUISA_COMPUTE_ENABLE_GUI=OFF -D ZLIB_INCLUDE_DIR=$CONDA_INCLUDE_PATH
cmake --build build -j $(nproc)
```

**ï¼ˆ7ï¼‰ å¸¸è§é—®é¢˜è§£ç­”ï¼ˆFAQsï¼‰**

- Assertion â€˜lerrorâ€™ failedï¼šå¦‚æœçœ‹åˆ° â€œGLIBCXX_3.4.30 not foundâ€ é”™è¯¯ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
```Shell
cd ~/anaconda3/envs/genesis/lib
mv libstdc++.so.6 libstdc++.so.6.old
ln -s /usr/lib/x86_64-linux-gnu/libstdc++.so.6 libstdc++.so.6
```
è¿™æ ·ï¼Œæ‚¨å°±å®Œæˆäº† Genesis çš„å®‰è£…ï¼Œæ¥ä¸‹æ¥å¯ä»¥å¼€å§‹ä½¿ç”¨å®ƒè¿›è¡Œä»¿çœŸå’Œå¼€å‘äº†ï¼

##### 2.2 Genesisåˆæ¢

###### Genesis æ•™ç¨‹ï¼šåŸºç¡€ç¤ºä¾‹
åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥åŠ è½½ä¸€ä¸ªå•ç‹¬çš„ Franka æœºæ¢°è‡‚ï¼Œç„¶åè®©å®ƒè‡ªç”±åœ°æ‰è½åˆ°åœ°é¢ä¸Šã€‚è¿™ä¸ªä¾‹å­å°†ç”¨æ¥æ¼”ç¤ºåœ¨ Genesis ä¸­åˆ›å»ºä»¿çœŸå®éªŒçš„æ ¸å¿ƒæ­¥éª¤å’Œä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚
```python
import genesis as gs
gs.init(backend=gs.cpu)
scene = gs.Scene(show_viewer=True)
plane = scene.add_entity(gs.morphs.Plane())
franka = scene.add_entity(
    gs.morphs.MJCF(file='xml/franka_emika_panda/panda.xml'),
)
scene.build()
for i in range(1000):
    scene.step()
```

è¿™å°±æ˜¯å®Œæ•´çš„ä»£ç è„šæœ¬ï¼è¿™æ ·çš„ç¤ºä¾‹åªéœ€è¦ä¸åˆ° 10 è¡Œä»£ç ï¼Œå¹¶ä¸”å·²ç»å°è£…äº†åˆ›å»ºä»¿çœŸå®éªŒæ‰€éœ€çš„æ‰€æœ‰æ­¥éª¤ã€‚
å¦‚æœä½ æƒ³æ·±å…¥äº†è§£ï¼Œå¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹ï¼Œæˆ‘ä»¬å°†ä¸€æ­¥ä¸€æ­¥åœ°è¿›è¡Œè®²è§£ï¼š

**ï¼ˆ1ï¼‰åˆå§‹åŒ–**

ç¬¬ä¸€æ­¥æ˜¯å¯¼å…¥ genesis å¹¶åˆå§‹åŒ–å®ƒï¼š
```python
import genesis as gs
gs.init(backend=gs.cpu)
```

åç«¯è®¾å¤‡ï¼šGenesis è®¾è®¡ä¸ºè·¨å¹³å°ï¼Œæ”¯æŒå¤šç§åç«¯è®¾å¤‡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ gs.cpuã€‚å¦‚æœä½ éœ€è¦ GPU åŠ é€Ÿçš„å¹¶è¡Œä»¿çœŸï¼Œå¯ä»¥é€‰æ‹©å…¶ä»–åç«¯ï¼Œä¾‹å¦‚ gs.cudaã€gs.vulkan æˆ– gs.metalã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ gs.gpu ä½œä¸ºå¿«æ·æ–¹å¼ï¼ŒGenesis ä¼šæ ¹æ®ä½ çš„ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªåç«¯ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæœ‰ CUDA æ”¯æŒï¼Œå®ƒä¼šé€‰æ‹© gs.cudaï¼Œå¦‚æœæ˜¯ Apple Silicon è®¾å¤‡ï¼Œå®ƒä¼šé€‰æ‹© gs.metalï¼‰ã€‚
ç²¾åº¦çº§åˆ«ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒGenesis ä½¿ç”¨ f32 ç²¾åº¦ã€‚å¦‚æœéœ€è¦æ›´é«˜çš„ç²¾åº¦ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® precision='64' æ¥åˆ‡æ¢åˆ° f64 ç²¾åº¦ã€‚
æ—¥å¿—çº§åˆ«ï¼šåˆå§‹åŒ–å®Œæˆåï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯å’Œä¸ Genesis ç›¸å…³çš„ä¿¡æ¯ï¼ˆå¦‚å½“å‰ç‰ˆæœ¬ï¼‰ã€‚å¦‚æœä¸å¸Œæœ›æ˜¾ç¤ºæ—¥å¿—è¾“å‡ºï¼Œå¯ä»¥é€šè¿‡è®¾ç½® logging_level='warning' æ¥æŠ‘åˆ¶æ—¥å¿—ã€‚
é¢œè‰²ä¸»é¢˜ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒGenesis çš„æ—¥å¿—é¢œè‰²ä¸»é¢˜ä¼˜åŒ–ä¸ºæ·±è‰²èƒŒæ™¯ç»ˆç«¯ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æµ…è‰²èƒŒæ™¯ç»ˆç«¯ï¼Œå¯ä»¥å°†ä¸»é¢˜æ”¹ä¸º 'light'ï¼›å¦‚æœä½ å–œæ¬¢é»‘ç™½æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥é€‰æ‹© 'dumb'ã€‚
ä¸€ä¸ªæ›´è¯¦ç»†çš„ gs.init() è°ƒç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š
```Shell
gs.init(
    seed                = None,
    precision           = '32',
    debug               = False,
    eps                 = 1e-12,
    logging_level       = None,
    backend             = gs_backend.gpu,
    theme               = 'dark',
    logger_verbose_time = False
)
```

**ï¼ˆ2ï¼‰åˆ›å»ºåœºæ™¯**

åœ¨ Genesis ä¸­ï¼Œæ‰€æœ‰çš„ç‰©ä½“ã€æœºå™¨äººã€ç›¸æœºç­‰éƒ½æ”¾ç½®åœ¨ä¸€ä¸ª Scene ä¸­ï¼š
scene = gs.Scene()
ä¸€ä¸ª Scene å¯¹è±¡åŒ…è£…äº†ä¸€ä¸ªä»¿çœŸå™¨å¯¹è±¡ï¼Œå®ƒå¤„ç†æ‰€æœ‰åº•å±‚çš„ç‰©ç†æ±‚è§£å™¨ï¼›åŒæ—¶ï¼Œå®ƒè¿˜åŒ…å«ä¸€ä¸ªå¯è§†åŒ–å™¨å¯¹è±¡ï¼Œç”¨æ¥ç®¡ç†ä¸å¯è§†åŒ–ç›¸å…³çš„æ¦‚å¿µã€‚æœ‰å…³æ›´å¤šçš„è¯¦ç»†ä¿¡æ¯å’Œ APIï¼Œè¯·å‚è€ƒ Scene æ–‡æ¡£ã€‚
åˆ›å»ºåœºæ™¯æ—¶ï¼Œä½ å¯ä»¥é…ç½®ä¸€äº›ç‰©ç†æ±‚è§£å™¨çš„å‚æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€äº›çš„ä¾‹å­ï¼š
```Shell
scene = gs.Scene(
    sim_options=gs.options.SimOptions(
        dt=0.01,
        gravity=(0, 0, -10.0),
    ),
    show_viewer=True,
    viewer_options=gs.options.ViewerOptions(
        camera_pos=(3.5, 0.0, 2.5),
        camera_lookat=(0.0, 0.0, 0.5),
        camera_fov=40,
    ),
)
```
è¿™ä¸ªä¾‹å­è®¾ç½®äº†æ¯ä¸€æ­¥ä»¿çœŸæ—¶é—´ä¸º 0.01sï¼Œé…ç½®äº†é‡åŠ›ï¼Œå¹¶è®¾ç½®äº†äº¤äº’å¼æŸ¥çœ‹å™¨çš„åˆå§‹ç›¸æœºä½ç½®ã€‚

**ï¼ˆ3ï¼‰åŠ è½½ç‰©ä½“åˆ°åœºæ™¯ä¸­**

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åŠ è½½äº†ä¸€ä¸ªå¹³é¢å’Œä¸€ä¸ª Franta æœºæ¢°è‡‚åˆ°åœºæ™¯ä¸­ï¼š
```Shell
plane = scene.add_entity(gs.morphs.Plane())
franka = scene.add_entity(
    gs.morphs.MJCF(file='xml/franka_emika_panda/panda.xml'),
)
```
åœ¨ Genesis ä¸­ï¼Œæ‰€æœ‰çš„ç‰©ä½“å’Œæœºå™¨äººéƒ½è¢«è¡¨ç¤ºä¸º Entity å¯¹è±¡ã€‚Genesis å®Œå…¨é‡‡ç”¨é¢å‘å¯¹è±¡çš„è®¾è®¡ï¼Œä½ å¯ä»¥ç›´æ¥é€šè¿‡å®ä½“å¯¹è±¡çš„æ–¹æ³•ä¸å®ƒä»¬äº¤äº’ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å¥æŸ„æˆ–å…¨å±€ IDã€‚
add_entity çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª morphã€‚åœ¨ Genesis ä¸­ï¼Œmorph æ˜¯ä¸€ä¸ªæ··åˆæ¦‚å¿µï¼Œå°è£…äº†ç‰©ä½“çš„å‡ ä½•å½¢çŠ¶å’Œå§¿æ€ä¿¡æ¯ã€‚é€šè¿‡ä½¿ç”¨ä¸åŒçš„ morphï¼Œä½ å¯ä»¥ä»å½¢çŠ¶åŸè¯­ã€ç½‘æ ¼ã€URDFã€MJCFã€Terrain æˆ–è½¯ä½“æœºå™¨äººæè¿°æ–‡ä»¶ç­‰åˆ›å»º Genesis å®ä½“ã€‚
åœ¨åˆ›å»º morph æ—¶ï¼Œä½ è¿˜å¯ä»¥æŒ‡å®šå®ƒçš„ä½ç½®ã€æœå‘ã€å¤§å°ç­‰ã€‚æ¯”å¦‚ï¼Œè®¾ç½® euler æˆ– quat æ¥æŒ‡å®šæœå‘ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š
```Shell
franka = scene.add_entity(
    gs.morphs.MJCF(
        file  = 'xml/franka_emika_panda/panda.xml',
        pos   = (0, 0, 0),
        euler = (0, 0, 90),  # ä½¿ç”¨ scipy çš„å¤–éƒ¨ x-y-z æ—‹è½¬æƒ¯ä¾‹ï¼Œå•ä½ä¸ºåº¦
        scale = 1.0,
    ),
)
```
æˆ‘ä»¬ç›®å‰æ”¯æŒä»¥ä¸‹ä¸åŒç±»å‹çš„å½¢çŠ¶åŸè¯­ï¼š
```Shell
- gs.morphs.Plane
- gs.morphs.Box
- gs.morphs.Cylinder
- gs.morphs.Sphere
````
æ­¤å¤–ï¼Œä¸ºäº†è®­ç»ƒè¿åŠ¨ä»»åŠ¡ï¼Œæˆ‘ä»¬è¿˜æ”¯æŒå„ç§å†…å»ºåœ°å½¢ï¼Œä»¥åŠé€šè¿‡ gs.morphs.Terrain æ ¹æ®ç”¨æˆ·æä¾›çš„é«˜åº¦å›¾åˆå§‹åŒ–çš„åœ°å½¢ï¼Œæˆ‘ä»¬å°†åœ¨åç»­çš„æ•™ç¨‹ä¸­è¯¦ç»†è®²è§£ã€‚
æˆ‘ä»¬è¿˜æ”¯æŒåŠ è½½ä¸åŒæ ¼å¼çš„å¤–éƒ¨æ–‡ä»¶ï¼Œå¦‚ï¼š
```Shell
- gs.morphs.MJCFï¼šMujoco çš„ .xml æœºå™¨äººé…ç½®æ–‡ä»¶
- gs.morphs.URDFï¼šä»¥ .urdf ç»“å°¾çš„æœºå™¨äººæè¿°æ–‡ä»¶
- gs.morphs.Meshï¼šéå…³èŠ‚åŒ–ç½‘æ ¼èµ„äº§ï¼Œæ”¯æŒæ‰©å±•åŒ…æ‹¬ï¼š*.objã€*.plyã€*.stlã€*.glbã€*.gltf
```
å½“åŠ è½½å¤–éƒ¨æ–‡ä»¶æ—¶ï¼Œéœ€è¦é€šè¿‡ file å‚æ•°æŒ‡å®šæ–‡ä»¶ä½ç½®ã€‚åœ¨è§£ææ—¶ï¼Œæˆ‘ä»¬ä¸ä»…ä¼šæ ¹æ®å½“å‰å·¥ä½œç›®å½•è§£æç›¸å¯¹è·¯å¾„ï¼Œè¿˜ä¼šåœ¨ genesis/assets å†…éƒ¨èµ„äº§ç›®å½•ä¸­æŸ¥æ‰¾ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¼šä» genesis/assets/xml/franka_emika_panda/panda.xml è·¯å¾„åŠ è½½ Franka æ¨¡å‹ã€‚

**ï¼ˆ4ï¼‰æ„å»ºåœºæ™¯å¹¶å¼€å§‹ä»¿çœŸ**
å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹ä»¿çœŸã€‚æ³¨æ„ï¼Œåœ¨å¼€å§‹ä»¿çœŸå‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè°ƒç”¨ scene.build() æ¥æ„å»ºåœºæ™¯ï¼š
```Shell
scene.build()
for i in range(1000):
    scene.step()
```
è°ƒç”¨ scene.build() åï¼ŒGenesis ä¼šè¿›è¡Œ GPU å†…æ ¸çš„å³æ—¶ç¼–è¯‘ï¼Œä¸ºä»¿çœŸå‡†å¤‡å¥½æ•°æ®ã€‚å®Œæˆåï¼Œä¼šå¼¹å‡ºä¸€ä¸ªäº¤äº’å¼æŸ¥çœ‹å™¨æ¥å¯è§†åŒ–ä»¿çœŸåœºæ™¯ã€‚æŸ¥çœ‹å™¨æä¾›äº†å„ç§é”®ç›˜å¿«æ·é”®æ¥å½•åˆ¶è§†é¢‘ã€æˆªå›¾ã€åˆ‡æ¢ä¸åŒçš„å¯è§†åŒ–æ¨¡å¼ç­‰ã€‚

**ï¼ˆ5ï¼‰å†…æ ¸ç¼–è¯‘å’Œç¼“å­˜**
ç”±äº Genesis ä½¿ç”¨å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰æŠ€æœ¯ï¼Œæ¯æ¬¡åˆ›å»ºä¸€ä¸ªåŒ…å«æ–°é…ç½®çš„åœºæ™¯æ—¶ï¼ˆå³ä¸åŒçš„æœºå™¨äººç±»å‹ã€ç‰©ä½“æ•°é‡ç­‰ï¼‰ï¼Œéƒ½ä¼šé‡æ–°ç¼–è¯‘ GPU å†…æ ¸ã€‚Genesis æ”¯æŒè‡ªåŠ¨ç¼“å­˜å·²ç¼–è¯‘çš„å†…æ ¸ï¼šç¬¬ä¸€æ¬¡è¿è¡Œåï¼ˆåªè¦æ­£å¸¸é€€å‡ºæˆ–ä½¿ç”¨ ctrl + c ç»ˆæ­¢ï¼‰ï¼Œå¦‚æœåœºæ™¯é…ç½®ä¿æŒä¸å˜ï¼Œåç»­è¿è¡Œä¼šåŠ è½½ç¼“å­˜çš„å†…æ ¸ï¼Œä»¥åŠ é€Ÿåœºæ™¯åˆ›å»ºè¿‡ç¨‹ã€‚
æˆ‘ä»¬æ­£åœ¨ç§¯æä¼˜åŒ–è¿™ä¸€ç¼–è¯‘æ­¥éª¤ï¼Œæœªæ¥ç‰ˆæœ¬å°†é€šè¿‡å¹¶è¡Œç¼–è¯‘å’Œæ›´å¿«çš„å†…æ ¸åºåˆ—åŒ–æŠ€æœ¯ï¼Œæå¤§æé«˜è¿™ä¸€è¿‡ç¨‹çš„é€Ÿåº¦ã€‚

###### å¯è§†åŒ–å’Œæ¸²æŸ“

Genesisçš„å¯è§†åŒ–ç³»ç»Ÿç”±åœºæ™¯çš„visualizerç®¡ç†ï¼ˆå³scene.visualizerï¼‰ã€‚å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å¯è§†åŒ–åœºæ™¯ï¼š

1. ä½¿ç”¨ç‹¬ç«‹çº¿ç¨‹è¿è¡Œçš„äº¤äº’å¼æŸ¥çœ‹å™¨
2. æ‰‹åŠ¨æ·»åŠ ç›¸æœºå¹¶æ¸²æŸ“å›¾åƒ


è¿æ¥æ˜¾ç¤ºå™¨åå¯ä½¿ç”¨äº¤äº’å¼æŸ¥çœ‹å™¨æ¥æŸ¥çœ‹åœºæ™¯ã€‚Genesisç”¨ä¸åŒçš„optionsç»„æ¥é…ç½®åœºæ™¯ä¸­çš„ç»„ä»¶ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é…ç½®:

- åˆ›å»ºåœºæ™¯æ—¶ä¿®æ”¹viewer_optionsä¸­çš„å‚æ•°
- ä½¿ç”¨vis_optionsè®¾ç½®å¯è§†åŒ–å±æ€§(æŸ¥çœ‹å™¨å’Œç›¸æœºå…±ç”¨)

ä¸‹é¢åˆ›å»ºä¸€ä¸ªè¯¦ç»†é…ç½®çš„åœºæ™¯:

```Shell
scene = gs.Scene(
    show_viewer    = True,
    viewer_options = gs.options.ViewerOptions(
        res           = (1280, 960),
        camera_pos    = (3.5, 0.0, 2.5),
        camera_lookat = (0.0, 0.0, 0.5),
        camera_fov    = 40,
        max_FPS       = 60,
    ),
    vis_options = gs.options.VisOptions(
        show_world_frame = True, # æ˜¾ç¤ºåŸç‚¹åæ ‡ç³»
        world_frame_size = 1.0, # åæ ‡ç³»é•¿åº¦(ç±³)
        show_link_frame  = False, # ä¸æ˜¾ç¤ºå®ä½“é“¾æ¥åæ ‡ç³» 
        show_cameras     = False, # ä¸æ˜¾ç¤ºç›¸æœºç½‘æ ¼å’Œè§†é”¥
        plane_reflection = True, # å¼€å¯å¹³é¢åå°„
        ambient_light    = (0.1, 0.1, 0.1), # ç¯å¢ƒå…‰
    ),
    renderer = gs.renderers.Rasterizer(), # ä½¿ç”¨å…‰æ …åŒ–æ¸²æŸ“å™¨
)
```

è¿™é‡Œå¯ä»¥è®¾ç½®:

- æŸ¥çœ‹å™¨ç›¸æœºçš„ä½ç½®å’Œè§†åœºè§’
- å¦‚æœmax_FPSä¸ºNone,æŸ¥çœ‹å™¨ä¼šå…¨é€Ÿè¿è¡Œ
- å¦‚æœresä¸ºNone,ä¼šåˆ›å»ºä¸€ä¸ª4:3çª—å£,é«˜åº¦ä¸ºæ˜¾ç¤ºå™¨ä¸€åŠ
- Genesisæä¾›ä¸¤ç§æ¸²æŸ“å™¨:Rasterizerå’ŒRayTracer
- æŸ¥çœ‹å™¨å›ºå®šä½¿ç”¨å…‰æ …åŒ–,ç›¸æœºé»˜è®¤ä¹Ÿä½¿ç”¨å…‰æ …åŒ–

åœºæ™¯åˆ›å»ºå,å¯ä»¥é€šè¿‡scene.visualizer.vieweræˆ–scene.viewerè®¿é—®æŸ¥çœ‹å™¨:

```Shell
cam_pose = scene.viewer.camera_pose()
scene.viewer.set_camera_pose(cam_pose)
```

**ç›¸æœºä¸ç¦»çº¿æ¸²æŸ“**

å¯ä»¥æ‰‹åŠ¨æ·»åŠ ç›¸æœºå¯¹è±¡è¿›è¡Œç¦»çº¿æ¸²æŸ“:

```Shell
cam = scene.add_camera(
    res    = (1280, 960),
    pos    = (3.5, 0.0, 2.5),
    lookat = (0, 0, 0.5),
    fov    = 30,
    GUI    = False
)
```

è®¾ç½®GUI=Trueä¼šä¸ºæ¯ä¸ªç›¸æœºåˆ›å»ºopencvçª—å£æ˜¾ç¤ºæ¸²æŸ“ç»“æœã€‚

æ„å»ºåœºæ™¯åå°±å¯ä»¥æ¸²æŸ“å›¾åƒäº†ã€‚ç›¸æœºæ”¯æŒ:

- RGBå›¾åƒ
- æ·±åº¦å›¾
- åˆ†å‰²æ©ç 
- è¡¨é¢æ³•çº¿

é»˜è®¤åªæ¸²æŸ“RGB,å¯ä»¥é€šè¿‡å‚æ•°å¼€å¯å…¶ä»–æ¨¡å¼:

```Shell
scene.build()
```

**æ¸²æŸ“æ‰€æœ‰ç±»å‹**

```Shell
rgb, depth, segmentation, normal = cam.render(depth=True, segmentation=True, normal=True)
```

å¦‚æœä½¿ç”¨GUI=Trueä¸”è¿æ¥äº†æ˜¾ç¤ºå™¨,ä¼šçœ‹åˆ°4ä¸ªçª—å£ã€‚(å¦‚æœçª—å£æ˜¯é»‘çš„,å¯ä»¥å¤šè°ƒç”¨ä¸€æ¬¡cv2.waitKey(1)æˆ–render()æ¥åˆ·æ–°)

å½•åˆ¶è§†é¢‘

ä¸‹é¢æ¼”ç¤ºå¦‚ä½•ç§»åŠ¨ç›¸æœºå¹¶å½•åˆ¶è§†é¢‘:

```Shell

#å¼€å§‹å½•åˆ¶
cam.start_recording()

import numpy as np
for i in range(120):
    scene.step()

    #ç§»åŠ¨ç›¸æœº
    cam.set_pose(
        pos    = (3.0 * np.sin(i / 60), 3.0 * np.cos(i / 60), 2.5),
        lookat = (0, 0, 0.5),
    )
    
    cam.render()

#åœæ­¢å½•åˆ¶å¹¶ä¿å­˜è§†é¢‘
cam.stop_recording(save_to_filename='video.mp4', fps=60)
```

å°†è§†é¢‘ä¿å­˜åˆ°video.mp4ï¼š


å®Œæ•´ä»£ç å¦‚ä¸‹:

```Shell
import genesis as gs

gs.init(backend=gs.cpu)

scene = gs.Scene(
    show_viewer = True,
    viewer_options = gs.options.ViewerOptions(
        res           = (1280, 960),
        camera_pos    = (3.5, 0.0, 2.5),
        camera_lookat = (0.0, 0.0, 0.5),
        camera_fov    = 40,
        max_FPS       = 60,
    ),
    vis_options = gs.options.VisOptions(
        show_world_frame = True,
        world_frame_size = 1.0,
        show_link_frame  = False,
        show_cameras     = False,
        plane_reflection = True,
        ambient_light    = (0.1, 0.1, 0.1),
    ),
    renderer=gs.renderers.Rasterizer(),
)

plane = scene.add_entity(
    gs.morphs.Plane(),
)
franka = scene.add_entity(
    gs.morphs.MJCF(file='xml/franka_emika_panda/panda.xml'),
)

cam = scene.add_camera(
    res    = (640, 480),
    pos    = (3.5, 0.0, 2.5),
    lookat = (0, 0, 0.5),
    fov    = 30,
    GUI    = False,
)

scene.build()


#æ¸²æŸ“rgbã€æ·±åº¦ã€åˆ†å‰²æ©ç å’Œæ³•çº¿å›¾
#rgb, depth, segmentation, normal = cam.render(rgb=True, depth=True, segmentation=True, normal=True)

cam.start_recording()
import numpy as np

for i in range(120):
    scene.step()
    cam.set_pose(
        pos    = (3.0 * np.sin(i / 60), 3.0 * np.cos(i / 60), 2.5),
        lookat = (0, 0, 0.5),
    )
    cam.render()
cam.stop_recording(save_to_filename='video.mp4', fps=60)
```

**å…‰çº¿è¿½è¸ªæ¸²æŸ“**

```Shell
Genesisæä¾›å…‰çº¿è¿½è¸ªæ¸²æŸ“å™¨ç”¨äºçœŸå®æ„Ÿæ¸²æŸ“ã€‚åˆ›å»ºåœºæ™¯æ—¶è®¾ç½®renderer=gs.renderers.RayTracer()å³å¯åˆ‡æ¢ã€‚æ”¯æŒè°ƒèŠ‚sppã€apertureã€modelç­‰å‚æ•°,
```

###### ç¯å¢ƒé…ç½®

åœ¨ä»¥ä¸‹ç¯å¢ƒä¸­é€šè¿‡æµ‹è¯•ï¼š

```Shell
- Ubuntu 22.04, CUDA 12.4, Python 3.9
- Ubuntu 24.04, CUDA 12.1, Python 3.9.12
```

- è·å–å­æ¨¡å—ï¼Œå³genesis/ext/LuisaRenderã€‚
#åœ¨ Genesis/ ç›®å½•ä¸­

```Shell
git submodule update --init --recursive
pip install -e ".[render]"
```

- å®‰è£… g++/gcc11ã€‚

```Shell
sudo apt install build-essential manpages-dev software-properties-common
sudo add-apt-repository ppa:ubuntu-toolchain-r/test
sudo apt update && sudo apt install gcc-11 g++-11
sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-11 110
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 110

#éªŒè¯g++/gccç‰ˆæœ¬
g++ --version
gcc --version
```
- å®‰è£…cmake 3.26åŠä»¥ä¸Šçš„ç‰ˆæœ¬ï¼ˆæ¨èä½¿ç”¨snapè¿›è¡Œå®‰è£…ï¼‰ã€‚
è¯·æ³¨æ„snapçš„åŒ…å®‰è£…è·¯å¾„æ˜¯/snap/bin/cmakeï¼ˆæˆ–/usr/bin/snapï¼‰ï¼Œè€Œç³»ç»Ÿå¯èƒ½åœ¨/usr/local/bin/cmakeå·²æœ‰å…¶ä½™ç‰ˆæœ¬çš„cmakeã€‚å› æ­¤éœ€è¦é€šè¿‡echo $PATHç¡®è®¤è·¯å¾„é¡ºåºã€‚

```Shell
sudo snap install cmake --classic
cmake --version
```

- å®‰è£…ä¾èµ–é¡¹ã€‚
```Shell
sudo apt install libvulkan-dev # Vulkan
sudo apt-get install zlib1g-dev # zlib
sudo apt-get install libx11-dev # X11
sudo apt-get install xorg-dev libglu1-mesa-dev # RandRå¤´æ–‡ä»¶
```

- æ„å»ºLuisaRenderï¼ˆä½¿ç”¨æ­£ç¡®ç‰ˆæœ¬çš„cmakeï¼‰ã€‚
```Shell
cd genesis/ext/LuisaRender
cmake -S . -B build -D CMAKE_BUILD_TYPE=Release -D PYTHON_VERSIONS=3.9 -D LUISA_COMPUTE_DOWNLOAD_NVCOMP=ON
```
- è®°å¾—æ£€æŸ¥pythonç‰ˆæœ¬

```Shell
cmake --build build -j $(nproc)
```
å¦‚æœæ— æ³•å®Œæˆæ„å»ºï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæä¾›äº†é¢„ç¼–è¯‘çš„ç»“æœï¼ˆæ³¨æ„æ£€æŸ¥æ˜¯å¦ä¸æœ¬æœºé…ç½®ç›¸åŒï¼‰ã€‚æ–‡ä»¶å‘½åè§„åˆ™ä¸ºbuild_<commit-tag>_cuda<version>_python<version>ã€‚ä¸‹è½½ä¸æœ¬æœºç³»ç»Ÿé…ç½®ç›¸åŒ¹é…çš„æ–‡ä»¶ï¼Œè§£å‹åé‡å‘½åä¸ºbuild/å¹¶æ”¾åˆ°genesis/ext/LuisaRenderè·¯å¾„ä¸‹ã€‚

ç¯å¢ƒé…ç½®å®Œæˆä¹‹åï¼Œè¿è¡Œç¤ºä¾‹ï¼š
cd examples/rendering
python demo.py
ä¼šå¾—åˆ°å¦‚ä¸‹æ¸²æŸ“ç»“æœï¼š



###### FAQ ç–‘éš¾è§£ç­”

- æ‰§è¡Œ
```shell
cmake -S . -B build -D CMAKE_BUILD_TYPE=Release -D PYTHON_VERSIONS=3.9 -D
```

``` LUISA_COMPUTE_DOWNLOAD_NVCOMP=ON```æ—¶é‡åˆ°Pybindé”™è¯¯ï¼Œ
```shell
CMake Error at src/apps/CMakeLists.txt:12 (find_package):
By not providing "Findpybind11.cmake" in CMAKE_MODULE_PATH this project has
asked CMake to find a package configuration file provided by "pybind11",
but CMake did not find one.

Could not find a package configuration file provided by "pybind11" with any
of the following names:

    pybind11Config.cmake
    pybind11-config.cmake
```

å¯èƒ½æ˜¯é—æ¼æ‰§è¡Œpip install -e ".[render]"å¯¼è‡´ã€‚æˆ–è€…ä¹Ÿå¯ä»¥ç›´æ¥å®‰è£…pybindï¼špip install "pybind11[global]"ã€‚
    
- æ‰§è¡Œ```cmake -S . -B build -D CMAKE_BUILD_TYPE=Release -D PYTHON_VERSIONS=3.9 -D```

```LUISA_COMPUTE_DOWNLOAD_NVCOMP=ON```æ—¶é‡åˆ°CUDAè¿è¡Œæ—¶ç¼–è¯‘é”™è¯¯ï¼Œ
```shell
/usr/bin/ld: CMakeFiles/luisa-cuda-nvrtc-standalone-compiler.dir/cuda_nvrtc_compiler.cpp.o: in function `main`:
cuda_nvrtc_compiler.cpp:(.text.startup+0x173): undefined reference to `nvrtcGetOptiXIRSize`
/usr/bin/ld: cuda_nvrtc_compiler.cpp:(.text.startup+0x197): undefined reference to `nvrtcGetOptiXIR`
```
    éœ€è¦æ­£ç¡®å®‰è£…â€œç³»ç»Ÿçº§â€çš„CUDAå·¥å…·åŒ…ï¼ˆcuda-toolkitï¼‰ï¼ˆå®˜æ–¹å®‰è£…æŒ‡å—ï¼‰ã€‚é¦–å…ˆæ£€æŸ¥CUDAå·¥å…·åŒ…æ˜¯å¦å®‰è£…ï¼Œ
```shell
nvcc --version # è¿™åº”è¯¥ä¸ä½ ä»nvidia-smiè·å–çš„CUDAç‰ˆæœ¬ä¸€è‡´
which nvcc # ç¡®è®¤ä½ æ­£åœ¨ä½¿ç”¨æ­£ç¡®çš„CUDAå·¥å…·åŒ…
```
    å¦‚æœnvccå‘½ä»¤æ²¡æœ‰ç»™å‡ºæ­£ç¡®çš„è¾“å‡ºï¼Œè¯·æŒ‰ç…§å®˜æ–¹CUDAå·¥å…·åŒ…å®‰è£…æŒ‡å—è¿›è¡Œæ“ä½œã€‚ä»¥ä¸‹æ˜¯å®‰è£…CUDAå·¥å…·åŒ…ï¼ˆä»¥CUDA 12.4ä¸ºä¾‹ï¼‰çš„ä¸€äº›æ­¥éª¤ã€‚ä»è¿™é‡Œä¸‹è½½å®‰è£…ç¨‹åºã€‚
```shell
wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-ubuntu2204.pin
sudo mv cuda-ubuntu2204.pin /etc/apt/preferences.d/cuda-repository-pin-600
wget https://developer.download.nvidia.com/compute/cuda/12.4.0/local_installers/cuda-repo-ubuntu2204-12-4-local_12.4.0-550.54.14-1_amd64.deb
sudo dpkg -i cuda-repo-ubuntu2204-12-4-local_12.4.0-550.54.14-1_amd64.deb
sudo cp /var/cuda-repo-ubuntu2204-12-4-local/cuda-*-keyring.gpg /usr/share/keyrings/
sudo apt-get update
sudo apt-get -y install cuda-toolkit-12-4
```
    è®¾ç½®äºŒè¿›åˆ¶æ–‡ä»¶å’Œè¿è¡Œæ—¶åº“è·¯å¾„ï¼šåœ¨```~/.bashrc```ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚æ³¨æ„æœ€å¥½å°†CUDAè·¯å¾„æ·»åŠ åˆ°æœ€åï¼Œå› ä¸º```/usr/local/cuda-12.4/bin```ç›®å½•ä¸­ä¹Ÿå¯èƒ½å­˜åœ¨å…¶ä»–ç‰ˆæœ¬çš„gccå’Œg++ï¼Œè€Œgcc/g++11æ˜¯æ„å»ºæ‰€å¿…éœ€çš„ï¼‰ï¼Œ
```shell
PATH=${PATH:+${PATH}:}/usr/local/cuda-12.4/bin
LD_LIBRARY_PATH=${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}/usr/local/cuda-12.4/lib64
```
    æœ€åé‡å¯ç»ˆç«¯æˆ–æ‰§è¡Œ```source ~/.bashrc```ã€‚
    å¦ä¸€ç§é”™è¯¯ç±»å‹æ˜¯ï¼Œ
```shell
	<your-env-path>/bin/ld: /lib/x86_64-linux-gnu/libc.so.6: undefined reference to `_dl_fatal_printf@GLIBC_PRIVATE`
	<your-env-path>/bin/ld: /lib/x86_64-linux-gnu/libc.so.6: undefined reference to `_dl_audit_symbind_alt@GLIBC_PRIVATE`
	<your-env-path>/genesis-test1/bin/ld: /lib/x86_64-linux-gnu/libc.so.6: undefined reference to `_dl_exception_create@GLIBC_PRIVATE`
	<your-env-path>/bin/ld: /lib/x86_64-linux-gnu/libc.so.6: undefined reference to `__nptl_change_stack_perm@GLIBC_PRIVATE`
	<your-env-path>/bin/ld: /lib/x86_64-linux-gnu/libc.so.6: undefined reference to `__tunable_get_val@GLIBC_PRIVATE`
	<your-env-path>/bin/ld: /lib/x86_64-linux-gnu/libc.so.6: undefined reference to `_dl_audit_preinit@GLIBC_PRIVATE`
	<your-env-path>/bin/ld: /lib/x86_64-linux-gnu/libc.so.6: undefined reference to `_dl_find_dso_for_object@GLIBC_PRIVATE`
```
    è¿™å¯èƒ½æ˜¯ç”±äºcondaç¯å¢ƒä¸­çš„CUDAå·¥å…·åŒ…å¯¼è‡´çš„ã€‚è¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œå¹¶å®‰è£…ç³»ç»Ÿçº§çš„CUDAï¼Œ
```shell
which nvcc
conda uninstall cuda-toolkit
```
    æˆ–è€…ï¼Œä½ å¯ä»¥å°†condaçš„åº“è·¯å¾„æ·»åŠ åˆ°è¿è¡Œæ—¶åº“è·¯å¾„ä¸­ï¼Œ
```shell
ls $CONDA_PREFIX/lib/libcudart.so # ä½ åº”è¯¥æœ‰è¿™ä¸ªæ–‡ä»¶
```
- åœ¨ä½ çš„```~/.bashrc```ä¸­æ·»åŠ 
```shell
LD_LIBRARY_PATH=${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}/usr/local/cuda-12.4/lib64
```
    æœ€åï¼Œè®°å¾—åœ¨å®Œæˆä¸Šè¿°ä¿®å¤åæ¸…ç†æ„å»ºã€‚
```shell
rm -r build
```

- æ‰§è¡Œ```cmake -S . -B build -D CMAKE_BUILD_TYPE=Release -D PYTHON_VERSIONS=3.9 -D```

```LUISA_COMPUTE_DOWNLOAD_NVCOMP=ON```æ—¶é‡åˆ°ç¼–è¯‘å™¨é”™è¯¯ï¼Œ
```shell
CMake Error at /snap/cmake/1435/share/cmake-3.31/Modules/CMakeDetermineCCompiler.cmake:49 (message):
Could not find compiler set in environment variable CC:

/home/tsunw/miniconda3/envs/genesis-test1/bin/x86_64-conda-linux-gnu-cc.
Call Stack (most recent call first):
CMakeLists.txt:21 (project)


CMake Error: CMAKE_C_COMPILER not set, after EnableLanguage
CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage
```
    å¯èƒ½æ˜¯gccå’Œg++ç‰ˆæœ¬ä¸æ­£ç¡®å¯¼è‡´ã€‚è¯·ä»”ç»†æ£€æŸ¥
    ï¼ˆiï¼‰gcc/g++ç‰ˆæœ¬æ˜¯å¦ä¸º 11
    ï¼ˆiiï¼‰äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯å¦æŒ‡å‘æ­£ç¡®çš„è·¯å¾„
    ï¼ˆiiiï¼‰äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„çš„é¡ºåº
	
```shell
gcc --version
g++ --version
which gcc
which g++
echo $PATH # ä¾‹å¦‚ï¼Œ/usr/local/cuda-12.4/bin/gccï¼ˆç‰ˆæœ¬=10.5ï¼‰ä¸åº”è¯¥æ’åœ¨/usr/bin/gccï¼ˆç‰ˆæœ¬=11ï¼‰ä¹‹å‰
```
- è¿è¡Œ```examples/rendering/demo.py```æ—¶å‡ºç°å¯¼å…¥é”™è¯¯ï¼Œ
```shell
[Genesis] [11:29:47] [ERROR] Failed to import LuisaRenderer. ImportError: /home/tsunw/miniconda3/envs/genesis-test1/bin/../lib/libstdc++.so.6: version `GLIBCXX_3.4.30` not found (required by /home/tsunw/workspace/Genesis/genesis/ext/LuisaRender/build/bin/liblc-core.so)
```
    condaå®‰è£…çš„libstdc++.so.6ä¸æ”¯æŒ3.4.30ï¼Œéœ€è¦å°†ç³»ç»Ÿåº“ä¸­çš„libstdc++.so.6æ–‡ä»¶é“¾æ¥åˆ°condaä¸­ï¼ˆå‚è€ƒï¼‰ã€‚
```shell
cd $CONDA_PREFIX/lib
mv libstdc++.so.6 libstdc++.so.6.old
ln -s /usr/lib/x86_64-linux-gnu/libstdc++.so.6 libstdc++.so.6
```

###### é€†è§£å’Œè¿åŠ¨è§„åˆ’

æˆ‘ä»¬å°†é€šè¿‡å‡ ä¸ªç¤ºä¾‹æ¥æ¼”ç¤ºå¦‚ä½•åœ¨Genesisä¸­ä½¿ç”¨é€†å‘è¿åŠ¨å­¦ï¼ˆIKï¼‰å’Œè¿åŠ¨è§„åˆ’ï¼Œå¹¶æ‰§è¡Œä¸€ä¸ªç®€å•çš„æŠ“å–ä»»åŠ¡ã€‚
  é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåœºæ™¯ï¼ŒåŠ è½½ä½ å–œæ¬¢çš„æœºå™¨äººè‡‚å’Œä¸€ä¸ªå°æ–¹å—ï¼Œæ„å»ºåœºæ™¯ï¼Œç„¶åè®¾ç½®æ§åˆ¶å¢ç›Šï¼š

```python
import numpy as np
import genesis as gs

########################## init ##########################
gs.init(backend=gs.gpu)

########################## create a scene ##########################
scene = gs.Scene(
    viewer_options = gs.options.ViewerOptions(
        camera_pos    = (3, -1, 1.5),
        camera_lookat = (0.0, 0.0, 0.5),
        camera_fov    = 30,
        max_FPS       = 60,
    ),
    sim_options = gs.options.SimOptions(
        dt = 0.01,
        substeps = 4, # for more stable grasping contact
    ),
    show_viewer = True,
)

########################## entities ##########################
plane = scene.add_entity(
    gs.morphs.Plane(),
)
cube = scene.add_entity(
    gs.morphs.Box(
        size = (0.04, 0.04, 0.04),
        pos  = (0.65, 0.0, 0.02),
    )
)
franka = scene.add_entity(
    gs.morphs.MJCF(file='xml/franka_emika_panda/panda.xml'),
)
########################## build ##########################
scene.build()

motors_dof = np.arange(7)
fingers_dof = np.arange(7, 9)

# set control gains
# Note: the following values are tuned for achieving best behavior with Franka
# Typically, each new robot would have a different set of parameters.
# Sometimes high-quality URDF or XML file would also provide this and will be parsed.
franka.set_dofs_kp(
    np.array([4500, 4500, 3500, 3500, 2000, 2000, 2000, 100, 100]),
)
franka.set_dofs_kv(
    np.array([450, 450, 350, 350, 200, 200, 200, 10, 10]),
)
franka.set_dofs_force_range(
    np.array([-87, -87, -87, -87, -12, -12, -12, -100, -100]),
    np.array([ 87,  87,  87,  87,  12,  12,  12,  100,  100]),
)
```
<img width="553" height="369" alt="image" src="https://github.com/user-attachments/assets/d53bb94e-57b5-4a28-aaf1-f584d9c28f51" />

æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å°†æœºå™¨äººæœ«ç«¯æ‰§è¡Œå™¨ç§»åŠ¨åˆ°ä¸€ä¸ªé¢„æŠ“å–å§¿æ€ã€‚è¿™å¯ä»¥é€šè¿‡ä¸¤ä¸ªæ­¥éª¤å®Œæˆï¼š
  - ä½¿ç”¨é€†å‘è¿åŠ¨å­¦ï¼ˆIKï¼‰æ¥æ±‚è§£ç»™å®šç›®æ ‡æœ«ç«¯æ‰§è¡Œå™¨å§¿æ€ä¸‹çš„å…³èŠ‚ä½ç½®
  - ä½¿ç”¨è¿åŠ¨è§„åˆ’å™¨åˆ°è¾¾ç›®æ ‡ä½ç½®
åœ¨Genesisä¸­ï¼Œè¿åŠ¨è§„åˆ’ä½¿ç”¨OMPLåº“ã€‚ä½ å¯ä»¥æŒ‰ç…§å®‰è£…é¡µé¢ä¸­çš„è¯´æ˜è¿›è¡Œå®‰è£…ã€‚
Genesisä¸­çš„IKå’Œè¿åŠ¨è§„åˆ’éå¸¸ç®€å•ï¼šæ¯ä¸ªæ“ä½œéƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªå‡½æ•°è°ƒç”¨å®Œæˆã€‚
```python
# get the end-effector link
end_effector = franka.get_link('hand')

# move to pre-grasp pose
qpos = franka.inverse_kinematics(
    link = end_effector,
    pos  = np.array([0.65, 0.0, 0.25]),
    quat = np.array([0, 1, 0, 0]),
)
# gripper open pos
qpos[-2:] = 0.04
path = franka.plan_path(
    qpos_goal     = qpos,
    num_waypoints = 200, # 2s duration
)
# execute the planned path
for waypoint in path:
    franka.control_dofs_position(waypoint)
    scene.step()

# allow robot to reach the last waypoint
for i in range(100):
    scene.step()
```
æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œé€†å‘è¿åŠ¨å­¦æ±‚è§£å’Œè¿åŠ¨è§„åˆ’æ˜¯æœºå™¨äººå®ä½“çš„ä¸¤ä¸ªé›†æˆæ–¹æ³•ã€‚å¯¹äºé€†å‘è¿åŠ¨å­¦æ±‚è§£ï¼Œä½ åªéœ€è¦å‘Šè¯‰æœºå™¨äººçš„IKæ±‚è§£å™¨å“ªä¸ªé“¾æ¥æ˜¯æœ«ç«¯æ‰§è¡Œå™¨ï¼Œå¹¶æŒ‡å®šç›®æ ‡å§¿æ€ã€‚ç„¶åï¼Œä½ å‘Šè¯‰è¿åŠ¨è§„åˆ’å™¨ç›®æ ‡å…³èŠ‚ä½ç½®ï¼ˆqposï¼‰ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªè§„åˆ’å¹¶å¹³æ»‘è¿‡çš„è·¯å¾„ç‚¹åˆ—è¡¨ã€‚è¯·æ³¨æ„ï¼Œåœ¨æ‰§è¡Œè·¯å¾„åï¼Œæˆ‘ä»¬è®©æ§åˆ¶å™¨å†è¿è¡Œ100æ­¥ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯PDæ§åˆ¶å™¨ï¼Œç›®æ ‡ä½ç½®å’Œå½“å‰å®é™…ä½ç½®ä¹‹é—´ä¼šå­˜åœ¨ä¸€å®šçš„å·®è·ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è®©æ§åˆ¶å™¨å¤šè¿è¡Œä¸€æ®µæ—¶é—´ï¼Œä»¥ä¾¿æœºå™¨äººèƒ½å¤Ÿåˆ°è¾¾è§„åˆ’è½¨è¿¹ä¸­çš„æœ€åä¸€ä¸ªè·¯å¾„ç‚¹ã€‚
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æœºå™¨äººå¤¹çˆªå‘ä¸‹ç§»åŠ¨ï¼ŒæŠ“å–æ–¹å—ï¼Œç„¶åå°†å…¶æèµ·ï¼š
```python
# reach
qpos = franka.inverse_kinematics(
    link = end_effector,
    pos  = np.array([0.65, 0.0, 0.135]),
    quat = np.array([0, 1, 0, 0]),
)
franka.control_dofs_position(qpos[:-2], motors_dof)
for i in range(100):
    scene.step()

# grasp
franka.control_dofs_position(qpos[:-2], motors_dof)
franka.control_dofs_force(np.array([-0.5, -0.5]), fingers_dof)

for i in range(100):
    scene.step()

# lift
qpos = franka.inverse_kinematics(
    link=end_effector,
    pos=np.array([0.65, 0.0, 0.3]),
    quat=np.array([0, 1, 0, 0]),
)
franka.control_dofs_position(qpos[:-2], motors_dof)
for i in range(200):
    scene.step()
```
åœ¨æŠ“å–ç‰©ä½“æ—¶ï¼Œæˆ‘ä»¬å¯¹å¤¹çˆªçš„ä¸¤ä¸ªè‡ªç”±åº¦è¿›è¡Œäº†åŠ›æ§åˆ¶ï¼Œå¹¶æ–½åŠ äº†0.5Nçš„æŠ“å–åŠ›ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä½ å°†çœ‹åˆ°ç‰©ä½“è¢«æˆåŠŸæŠ“å–å¹¶æèµ·ã€‚

æ³¨æ„:
åœ¨Genesisä¸­ï¼Œè¿åŠ¨è§„åˆ’ä½¿ç”¨OMPLåº“ã€‚é‡åˆ°å¦‚ä¸‹æŠ¥é”™è¯´æ˜OMPLæœªå®‰è£…
<img width="553" height="100" alt="image" src="https://github.com/user-attachments/assets/7f810d41-f371-4a19-aedd-b2b53c5043e6" />

å®‰è£…æ–¹æ³•å¦‚ä¸‹:

1. ä¾æ®ç³»ç»ŸåŠpythonç‰ˆæœ¬ä¸‹è½½whlæ–‡ä»¶,ä¸‹è½½åœ°å€[https://github.com/ompl/ompl/releases/tag/prerelease](https://github.com/ompl/ompl/releases/tag/prerelease)

<img width="554" height="402" alt="image" src="https://github.com/user-attachments/assets/b0949ee6-2ba8-40e7-97aa-095096fb29ce" />

2. è¿›å…¥whlä¸‹è½½ç›®å½•å¹¶æ‰“å¼€ç»ˆç«¯,æ‰§è¡Œä¸‹åˆ—å‘½ä»¤
conda activate genesisæ‰€åœ¨ç¯å¢ƒåç§°
pip install ompl-1.6.0-cp310-cp310-manylinux_2_28_x86_64.whl

<img width="554" height="103" alt="image" src="https://github.com/user-attachments/assets/3d5945e4-32b4-4927-b1cd-faf7f4a7f963" />

3. ç¨‹åºé¡ºåˆ©è¿è¡Œ

æ›´å¤šï¼š
[https://yv6uc1awtjc.feishu.cn/wiki/EEqAwFLo5iUdn5kD95OcAOtZnhf](https://yv6uc1awtjc.feishu.cn/wiki/EEqAwFLo5iUdn5kD95OcAOtZnhf)

#### 3ã€ä»¿çœŸç¤ºä¾‹
###### æ„å»ºä»¿çœŸä»£ç 
<img width="553" height="312" alt="image" src="https://github.com/user-attachments/assets/734a7d45-3c59-4ff8-87da-3393a85af27c" />


ä½¿ç”¨GPUåŠ é€Ÿä»¿çœŸçš„æœ€å¤§ä¼˜åŠ¿æ˜¯èƒ½å¤Ÿå®ç°åœºæ™¯çº§åˆ«çš„å¹¶è¡Œæ€§ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨æˆåƒä¸Šä¸‡ä¸ªç¯å¢ƒä¸­åŒæ—¶è®­ç»ƒæœºå™¨äººã€‚

åœ¨Genesisä¸­ï¼Œåˆ›å»ºå¹¶è¡Œä»¿çœŸéå¸¸ç®€å•ï¼šåœ¨æ„å»ºåœºæ™¯æ—¶ï¼Œåªéœ€æ·»åŠ ä¸€ä¸ªé¢å¤–çš„å‚æ•°n_envsæ¥å‘Šè¯‰æ¨¡æ‹Ÿå™¨ä½ æƒ³è¦å¤šå°‘ä¸ªç¯å¢ƒã€‚å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚è¯·æ³¨æ„ï¼Œä¸ºäº†æ¨¡ä»¿å­¦ä¹ æ–‡çŒ®ä¸­çš„å‘½åçº¦å®šï¼Œæˆ‘ä»¬ä¹Ÿä¼šä½¿ç”¨æœ¯è¯­batchingæ¥è¡¨ç¤ºå¹¶è¡ŒåŒ–æ“ä½œã€‚

ç¤ºä¾‹è„šæœ¬ï¼š
```python
import genesis as gs
import torch

########################## åˆå§‹åŒ– ##########################
gs.init(backend=gs.gpu)

########################## åˆ›å»ºåœºæ™¯ ##########################
scene = gs.Scene(
    show_viewer    = True,
    viewer_options = gs.options.ViewerOptions(
        camera_pos    = (3.5, -1.0, 2.5),
        camera_lookat = (0.0, 0.0, 0.5),
        camera_fov    = 40,
    ),
    rigid_options = gs.options.RigidOptions(
        dt                = 0.01,
    ),
)

########################## å®ä½“ ##########################
plane = scene.add_entity(
    gs.morphs.Plane(),
)

franka = scene.add_entity(
    gs.morphs.MJCF(file='xml/franka_emika_panda/panda.xml'),
)

########################## æ„å»º ##########################

# åˆ›å»º20ä¸ªå¹¶è¡Œç¯å¢ƒ
B = 20
scene.build(n_envs=B, env_spacing=(1.0, 1.0))

# æ§åˆ¶æ‰€æœ‰æœºå™¨äºº
franka.control_dofs_position(
    torch.tile(
        torch.tensor([0, 0, 0, -1.0, 0, 0, 0, 0.02, 0.02], device=gs.device), (B, 1)
    ),
)

for i in range(1000):
    scene.step()
```
ä¸Šè¿°è„šæœ¬ä¸Hello, Genesisä¸­çš„ç¤ºä¾‹å‡ ä¹ç›¸åŒï¼Œåªæ˜¯scene.build()ç°åœ¨é™„åŠ äº†ä¸¤ä¸ªé¢å¤–çš„å‚æ•°ï¼š
- n_envsï¼šæŒ‡å®šä½ æƒ³è¦åˆ›å»ºçš„æ‰¹é‡ç¯å¢ƒæ•°é‡
- env_spacingï¼šç”Ÿæˆçš„å¹¶è¡Œç¯å¢ƒå…±äº«ç›¸åŒçš„çŠ¶æ€ã€‚ä¸ºäº†å¯è§†åŒ–ç›®çš„ï¼Œä½ å¯ä»¥æŒ‡å®šæ­¤å‚æ•°ï¼Œè¦æ±‚å¯è§†åŒ–å·¥å…·å°†æ‰€æœ‰ç¯å¢ƒä»¥(x, y)ç±³çš„è·ç¦»åˆ†å¸ƒåœ¨ç½‘æ ¼ä¸­ã€‚è¯·æ³¨æ„ï¼Œè¿™åªå½±å“å¯è§†åŒ–è¡Œä¸ºï¼Œå¹¶ä¸ä¼šæ”¹å˜æ¯ä¸ªç¯å¢ƒä¸­å®ä½“çš„å®é™…ä½ç½®ã€‚

###### æ§åˆ¶æ‰¹é‡ç¯å¢ƒä¸­çš„æœºå™¨äºº

å›æƒ³ä¸€ä¸‹æˆ‘ä»¬åœ¨ä¹‹å‰çš„æ•™ç¨‹ä¸­ä½¿ç”¨çš„APIï¼Œä¾‹å¦‚franka.control_dofs_position()ã€‚ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨å®Œå…¨ç›¸åŒçš„APIæ¥æ§åˆ¶æ‰¹é‡æœºå™¨äººï¼Œåªæ˜¯è¾“å…¥å˜é‡éœ€è¦ä¸€ä¸ªé¢å¤–çš„æ‰¹é‡ç»´åº¦ï¼š
```python
franka.control_dofs_position(torch.zeros(B, 9, device=gs.device))
```
ç”±äºæˆ‘ä»¬åœ¨GPUä¸Šè¿è¡Œä»¿çœŸï¼Œä¸ºäº†å‡å°‘CPUå’ŒGPUä¹‹é—´çš„æ•°æ®ä¼ è¾“å¼€é”€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€šè¿‡gs.deviceé€‰æ‹©çš„torchå¼ é‡è€Œä¸æ˜¯numpyæ•°ç»„ï¼ˆä½†numpyæ•°ç»„ä¹Ÿå¯ä»¥å·¥ä½œï¼‰ã€‚å½“ä½ éœ€è¦é¢‘ç¹å‘é€ä¸€ä¸ªå…·æœ‰å·¨å¤§æ‰¹é‡å¤§å°çš„å¼ é‡æ—¶ï¼Œè¿™å¯ä»¥å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚
ä¸Šè¿°è°ƒç”¨å°†æ§åˆ¶æ‰¹é‡ç¯å¢ƒä¸­çš„æ‰€æœ‰æœºå™¨äººã€‚å¦‚æœä½ åªæƒ³æ§åˆ¶æŸäº›ç¯å¢ƒï¼Œå¯ä»¥å¦å¤–ä¼ å…¥envs_idxï¼Œä½†è¯·ç¡®ä¿positionå¼ é‡çš„æ‰¹é‡ç»´åº¦å¤§å°ä¸envs_idxçš„é•¿åº¦åŒ¹é…ï¼š
```python
# åªæ§åˆ¶3ä¸ªç¯å¢ƒï¼š1, 5å’Œ7ã€‚
franka.control_dofs_position(
    position = torch.zeros(3, 9, device=gs.device),
    envs_idx = torch.tensor([1, 5, 7], device=gs.device),
)
```

æ­¤è°ƒç”¨å°†ä»…å‘3ä¸ªé€‰å®šçš„ç¯å¢ƒå‘é€é›¶ä½ç½®å‘½ä»¤ã€‚

Genesisæ”¯æŒå¤šè¾¾æ•°ä¸‡ä¸ªå¹¶è¡Œç¯å¢ƒï¼Œå¹¶ä»¥è¿™ç§æ–¹å¼è§£é”å‰æ‰€æœªæœ‰çš„ä»¿çœŸé€Ÿåº¦ã€‚å…³é—­æŸ¥çœ‹å™¨ï¼Œå¹¶å°†æ‰¹é‡å¤§å°æ›´æ”¹ä¸º30000ï¼ˆå¦‚æœä½ çš„GPUæ˜¾å­˜è¾ƒå°ï¼Œè¯·è€ƒè™‘ä½¿ç”¨è¾ƒå°çš„æ‰¹é‡å¤§å°ï¼‰ï¼š
```python
import torch
import genesis as gs

gs.init(backend=gs.gpu)

scene = gs.Scene(
    show_viewer   = False,
    rigid_options = gs.options.RigidOptions(
        dt                = 0.01,
    ),
)

plane = scene.add_entity(
    gs.morphs.Plane(),
)

franka = scene.add_entity(
    gs.morphs.MJCF(file='xml/franka_emika_panda/panda.xml'),
)

scene.build(n_envs=30000)

# æ§åˆ¶æ‰€æœ‰æœºå™¨äºº
franka.control_dofs_position(
    torch.tile(
        torch.tensor([0, 0, 0, -1.0, 0, 0, 0, 0.02, 0.02], device=gs.device), (30000, 1)
    ),
)

for i in range(1000):
    scene.step()
```

åœ¨é…å¤‡RTX 4090å’Œ14900Kçš„æ¡Œé¢ä¸Šè¿è¡Œä¸Šè¿°è„šæœ¬å¯ä»¥å®ç°æœªæ¥çš„ä»¿çœŸé€Ÿåº¦â€”â€”æ¯ç§’è¶…è¿‡4300ä¸‡å¸§ï¼Œè¿™æ¯”å®æ—¶å¿«430,000å€ã€‚

<img width="554" height="102" alt="image" src="https://github.com/user-attachments/assets/e27d2313-7e41-4afc-bc47-9966c295e7fe" />

å°æŠ€å·§
FPSæ—¥å¿—è®°å½•ï¼š é»˜è®¤æƒ…å†µä¸‹ï¼ŒGenesisè®°å½•å™¨å°†åœ¨ç»ˆç«¯æ˜¾ç¤ºå®æ—¶ä»¿çœŸé€Ÿåº¦ã€‚ä½ å¯ä»¥åœ¨åˆ›å»ºåœºæ™¯æ—¶è®¾ç½®show_FPS=Falseæ¥ç¦ç”¨æ­¤è¡Œä¸ºã€‚

#### 4ã€Genesisèµ„æ–™æ±‡æ€»

ä»Šæ—¥åˆ·å±çš„Genesisæœ‰æ•ˆä¿¡æºæ•´åˆ - å¼ºåŒ–å­¦å¾’çš„æ–‡ç«  - çŸ¥ä¹
[https://zhuanlan.zhihu.com/p/13603265800](https://zhuanlan.zhihu.com/p/13603265800)

å®Œæ•´Demoè§†é¢‘ï¼š[ã€å¤ªç‚¸è£‚äº† Genesisæœºå™¨äººç‰©ç†å¼•æ“éœ‡æ’¼å‘å¸ƒ-Bç«™è½¬è½½ã€‘](https://www.bilibili.com/video/BV12ykTY5EPr/)

genesisä¸­æ–‡æ–‡æ¡£[https://genesis-world.readthedocs.io/zh-cn](https://genesis-world.readthedocs.io/zh-cn)

å¼€æºåœ°å€ï¼š[https://github.com/Genesis-Embodied-AI/Genesis](https://github.com/Genesis-Embodied-AI/Genesis)

é¡¹ç›®ä¸»é¡µï¼š[https://genesis-embodied-ai.github.io/](https://genesis-embodied-ai.github.io/)

è®ºæ–‡ï¼šæš‚æ—¶æ²¡æœ‰å‘å¸ƒï¼›

ä¸‰å¤§ä¼šæŠ¥é“ï¼š[https://mp.weixin.qq.com/s/vx5owauc2aNUPf8LVeB8jw](https://mp.weixin.qq.com/s/vx5owauc2aNUPf8LVeB8jw)

ä½œè€…ç¤¾åª’ä¸»é¡µã€åç»­ä¼šæœ‰discordã€‘ï¼š[https://x.com/zhou_xian_/status/1869511650782658846?s=46&t=e_20cB9LtY99fq_ngACPgA](https://x.com/zhou_xian_/status/1869511650782658846?s=46&t=e_20cB9LtY99fq_ngACPgA)

çŸ³éº»ç¬”è®°ï¼š[Genesis å‘å¸ƒï¼šå…¨æ–°æœºå™¨äººç‰©ç†å¼•æ“â€”â€”å®ƒä¼šå˜é©æœºå™¨äººä»¿çœŸå—ï¼Ÿ](https://mp.weixin.qq.com/s/IEhpXMdotHOPwhLdZYKeAA)

åç©ºç¿»ä»£ç ï¼š[https://github.com/ziyanx02/Genesis-backflip](https://github.com/ziyanx02/Genesis-backflip)
